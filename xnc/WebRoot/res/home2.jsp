<%@ page language="java" contentType="text/html; charset=utf-8"
    pageEncoding="utf-8"%>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>农家乐旅游</title>
<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="js/jquery-1.11.2.min.js"></script>

<style type="text/css">
	.cladiv div,.cladiv div img,.cladiv div label{cursor: pointer;}
	li a:HOVER {
		background-color: green !important;
		color:blue !important
	}
	ul li a{height:40px !important}
</style>
</head>
<body>
<center>
	<div class="" style="width: 1024px;">
		<div class="">
			<div class="">
				<div style="height: 115px;padding: 30px 10px 10px 40px;border:solid 1px green;background-image: url('img/1.jpg');">
					<img alt="" src="img/home01.png" style="margin-left: -550px"/>
				</div>
				<ul class="nav nav-pills" style="background-color: green">
					<li>
						 <a id="tohome" href="javascript:void(0)" style="font-size: 18px;padding: 12px 10px 12px 40px;color:white;">首页&nbsp;&nbsp;&nbsp;</a>
					</li>
					<li>
						 <a href="home2.jsp" style="font-size: 18px;padding: 12px 10px 12px 10px;color:#BCEE68;">农家院&nbsp;&nbsp;&nbsp;</a>
					</li>
					<li>
						 <a href="javascript:void(0)" style="font-size: 18px;padding: 12px 10px 12px 10px;color:white;">景观娱乐&nbsp;&nbsp;&nbsp;</a>
					</li>
					<li>
						 <a href="javascript:void(0)" style="font-size: 18px;padding: 12px 10px 12px 10px;color:white;">周边环境&nbsp;&nbsp;&nbsp;</a>
					</li>
					<li>
						 <a href="javascript:void(0)" style="font-size: 18px;padding: 12px 10px 12px 10px;color:white;">农家特产&nbsp;&nbsp;&nbsp;</a>
					</li>
					<li class="pull-right">
						 <a href="javascript:void(0)" style="font-size: 14px;padding: 12px 10px 12px 10px;color:white;">加入收藏</a>
					</li>
					<li class="pull-right">
						 <a href="javascript:void(0)" style="font-size: 14px;padding: 12px 10px 12px 10px;color:white;">设为首页&nbsp;&nbsp;&nbsp;</a>
					</li>
					<li class="pull-right">
						 <a href="javascript:void(0)" style="font-size: 14px;padding: 12px 10px 12px 10px;color:white;">留言咨询&nbsp;&nbsp;&nbsp;</a>
					</li>
				</ul>
				<div>
					<img alt="" src="img/sec02.jpg" style="width: 100%">
					<img alt="" src="img/sec3.jpg">
					<div style="width:1024px;height:200px;margin-top: -1120px" class="cladiv">
						<div style="margin-left: -680px;width: 30px;margin-top: -450px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -595px;width: 30px;margin-top: -25px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -500px;width: 30px;margin-top: -25px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -390px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -290px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -180px;width: 30px;margin-top: -15px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -85px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 25px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 135px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 225px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 335px;width: 30px;margin-top: -25px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div class="fir_six" style="margin-left: 430px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label id="fir_six" class="RS_WJ_CS_WD KT_WJ_PDJ_KZG_WD"  style="margin-left:-20px;color:red;">2</label></div>
						<div style="margin-left: 535px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 635px;width: 30px;margin-top: -25px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 735px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 845px;width: 30px;margin-top: -25px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 945px;width: 30px;margin-top: -25px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<br />
						<div style="margin-left: -895px;width: 30px;margin-top: -15px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -805px;width: 30px;margin-top: -55px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -725px;width: 30px;margin-top: -55px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -600px;width: 30px;margin-top: -45px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -500px;width: 30px;margin-top: -25px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -400px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -300px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -200px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -100px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 10px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 105px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 215px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 320px;width: 30px;margin-top: -25px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 425px;width: 30px;margin-top: -23px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 525px;width: 30px;margin-top: -23px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 625px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 725px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 835px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<br />
						<div style="margin-left: -910px;width: 30px;margin-top: -5px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -810px;width: 30px;margin-top: -50px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -725px;width: 30px;margin-top: -50px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -620px;width: 30px;margin-top: -50px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -525px;width: 30px;margin-top: -45px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -430px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -330px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div class="thi_eight" style="margin-left: -230px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label id="thi_eight" class="RS_GS_WD SN_110_WD" style="margin-left:-20px;color:red ">1</label></div>
						<div style="margin-left: -115px;width: 30px;margin-top: -15px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: -25px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 75px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 185px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 290px;width: 30px;margin-top: -22px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 395px;width: 30px;margin-top: -23px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 495px;width: 30px;margin-top: -23px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 595px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 695px;width: 30px;margin-top: -20px;"><img src="img/sec03.png"><label style="margin-left:-21px " class="emp">0</label></div>
						<div style="margin-left: 805px;width: 30px;margin-top: -35px;"><img src="img/sec03.png"><label style="margin-left:21px " class="emp">0</label></div>
					</div>
					<div style="margin-top: -250px;margin-left: 800px">
						<select id="change_sec">
							<option value="0">空余房间数</option>
							<option value="1">热水出水温度</option>
							<option value="2">室内平均温度</option>
						</select>
					</div>
				</div>
				
			</div>
		</div>
	</div>
</center>
</body>

<script>
	$(function(){
		$(".fir_six").click(function(){
			window.location="home3.jsp"
		})
		$(".thi_eight").click(function(){
			window.location="home4.jsp"
		})
		$("#change_sec").change(function(){
			var value=$(this).val()
			var emps=$(".emp");
			if(value==0){
				$(".emp").html(0);
				$("#fir_six").html(2);
				$("#thi_eight").html(1);
			}else{
				//获取数据
				var jsdsurl="ws://123.56.26.187/jsds/jsdswebsocket/data"
				var yygurl="ws://123.56.26.187/yyg/yygwebsocket/data"
				if(value==1){
					getdata(jsdsurl,"RS_WJ_CS_WD");
					getdata(yygurl,"RS_GS_WD");
					for(var i=0;i<emps.length;i++){
						$(emps[i]).html(RndNum(45,20));
					}
					
				}else if(value==2){
					getdata(jsdsurl,"KT_WJ_PDJ_KZG_WD");
					getdata(yygurl,"SN_110_WD");
					for(var i=0;i<emps.length;i++){
						$(emps[i]).html(RndNum(25,5));
					}
				}
				
				
			}
		})
		function getdata(url,name){
			var wsc = null;
			if ("WebSocket" in window) {
				wsc = new WebSocket(url);
			} else if ("MozWebSocket" in window) {
				wsc = new MozWebSocket(url);
			} else {
				alert("浏览器不支持WebSocket");
			}
			wsc.onopen = function() {
				var enameArray=new Array();
				enameArray[0]=name;
				var json={"category":false,"dataArray":true,"enameArray":enameArray}
				sendMessage(1, 1, json, wsc);
			}
			wsc.onerror=function(){
				console.log("数据连接error")
			}
			wsc.onclose=function(){
				console.log("数据连接断开")
			}
			wsc.onmessage = function(msg) {
				if (typeof(msg.data) == "string") {
					var msg=JSON.parse(msg.data);
					var msgArray=msg.list;
					var dataEname;
					var dataValue;
					for(var i=0;i<msgArray.length;i++){
						dataEname=msgArray[i].dataEname;
						dataValue=msgArray[i].dataValue;
						$("."+dataEname).html(Math.round(dataValue))
					}
				}
			}
			
		}
		var msgid =1;
		function sendMessage(ruletype,msgnum,msg,session) {
			if (session) {
				var sendtemp = msg;
				sendtemp["ruletype"]=ruletype;
				sendtemp["msgnum"]=msgnum;
				sendtemp["msgid"]=msgid;
				sendtemp["mac_name"]="mac";
				sendtemp["user_name"]="username";
				sendtemp["password"]="password";
				session.send(JSON.stringify(sendtemp));
				
				msgid++;
				return msgid;
			}
		}
		//产生[min-max]的随机数函数
		function RndNum(max,min){
			 var Range = max-min;
		      var Rand = Math.random();
		      var num = min + Math.floor(Rand * Range); //舍去
		      return num
		  /*   var rnd="";
		    for(var i=0;i<n;i++)
		        rnd+=Math.floor(Math.random()*10);
		    return rnd; */
		}
		$("#tohome").click(function(){
			parent.location.reload()
		})
	})
</script>
</html>